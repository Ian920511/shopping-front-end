"use strict";(self["webpackChunkshopping_front_end"]=self["webpackChunkshopping_front_end"]||[]).push([[556],{5556:function(e,a,l){l.r(a),l.d(a,{default:function(){return C}});var r=l(6252),t=l(9963);const n={class:"container py-5"},s=(0,r._)("h1",{class:"mt-5"}," 使用者資訊 ",-1),u={class:"form-label-group mb-2"},o=(0,r._)("label",{for:"name"},"Name",-1),c={class:"form-label-group mb-2"},d=(0,r._)("label",{for:"account"},"Account",-1),i={class:"form-label-group mb-3"},m=(0,r._)("label",{for:"address"},"Address",-1),v={class:"form-label-group mb-3"},p=(0,r._)("label",{for:"tel"},"Tel",-1),b=(0,r._)("button",{class:"btn btn-lg btn-primary d-block mx-auto mb-3",type:"submit"}," Edit ",-1);function f(e,a,l,f,_,h){const y=(0,r.up)("nav-tabs");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r.Wm)(y),s,(0,r._)("form",{class:"w-100",onSubmit:a[5]||(a[5]=(0,t.iM)(((...a)=>e.handleSubmit&&e.handleSubmit(...a)),["stop","prevent"]))},[(0,r._)("div",u,[o,(0,r.wy)((0,r._)("input",{id:"name","onUpdate:modelValue":a[0]||(a[0]=a=>e.name=a),name:"name",type:"text",class:"form-control",placeholder:"name",autocomplete:"username",required:"",autofocus:""},null,512),[[t.nr,e.name]])]),(0,r._)("div",c,[d,(0,r.wy)((0,r._)("input",{id:"account","onUpdate:modelValue":a[1]||(a[1]=a=>e.account=a),name:"account",type:"text",class:"form-control",placeholder:"account",autocomplete:"account",required:"",disabled:""},null,512),[[t.nr,e.account]])]),(0,r._)("div",i,[m,(0,r.wy)((0,r._)("input",{id:"address","onUpdate:modelValue":a[2]||(a[2]=a=>e.address=a),name:"address",type:"text",class:"form-control",placeholder:"address",autocomplete:"address-level4",required:""},null,512),[[t.nr,e.address]])]),(0,r._)("div",v,[p,(0,r.wy)((0,r._)("input",{id:"tel","onUpdate:modelValue":a[3]||(a[3]=a=>e.tel=a),name:"tel",type:"text",class:"form-control",placeholder:"tel",autocomplete:"tel",required:""},null,512),[[t.nr,e.tel]])]),b,(0,r._)("button",{class:"btn btn-lg btn-secondary d-block mx-auto mb-3",type:"button",onClick:a[4]||(a[4]=(...a)=>e.handleCancel&&e.handleCancel(...a))}," Cancel ")],32)])}var _=l(2958),h=l(2262),y=l(4331),U=l(2863),g=l(9682),w=(0,r.aZ)({components:{NavTabs:_.Z},setup(){const e=(0,y.L)(),a=(0,h.iH)(e.currentUser.name),l=(0,h.iH)(e.currentUser.account),t=(0,h.iH)(e.currentUser.address),n=(0,h.iH)(e.currentUser.tel),s=(0,h.iH)(e.currentUser.role),u=(0,h.iH)(""),o=(0,h.iH)(""),c=(0,h.iH)(""),d=(0,h.iH)(""),i=async()=>{try{const{data:r}=await g.Z.getUserProfile({userId:e.currentUser.id});a.value=r.name,l.value=r.account,t.value=r.address,n.value=r.tel,s.value=r.role,u.value=r.name,o.value=r.address,c.value=r.tel,d.value=r.role}catch(r){U.F.fire({icon:"error",title:"獲取用戶資料失敗"})}},m=async()=>{try{const l={name:a.value,address:t.value,tel:n.value,role:s.value},{data:r}=await g.Z.updateUser({userId:e.currentUser.id,formData:l});if("error"===r.status)throw new Error(r.message);a.value=r.name,t.value=r.address,n.value=r.tel,s.value=r.role,e.currentUser.name=a.value,e.currentUser.address=t.value,e.currentUser.tel=n.value,e.currentUser.role=s.value,U.F.fire({icon:"success",title:"更新用戶資料成功"})}catch(l){console.log(l),U.F.fire({icon:"error",title:l.message||"更新用戶資料失敗"})}},v=()=>{a.value=u.value,t.value=o.value,n.value=c.value,s.value=d.value};return(0,r.bv)((()=>{i()})),{name:a,account:l,address:t,tel:n,role:s,handleSubmit:m,handleCancel:v}}}),H=l(3744);const k=(0,H.Z)(w,[["render",f]]);var C=k}}]);
//# sourceMappingURL=556.c0f616fa.js.map