"use strict";(self["webpackChunkshopping_front_end"]=self["webpackChunkshopping_front_end"]||[]).push([[677],{677:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}});var l=r(6252);const s={class:"container py-5"},a=(0,l._)("h1",{class:"mt-5"}," 訂單資訊 ",-1);function n(e,t,r,n,o,c){const d=(0,l.up)("nav-tabs"),u=(0,l.up)("BuyDetail"),i=(0,l.up)("SellerDetail");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(d),a,"buyer"===e.currentUser.role?((0,l.wg)(),(0,l.j4)(u,{key:0})):"seller"===e.currentUser.role?((0,l.wg)(),(0,l.j4)(i,{key:1})):(0,l.kq)("",!0)])}var o=r(2958),c=r(3577);const d={class:"table"},u=(0,l._)("thead",{class:"thead-dark"},[(0,l._)("tr",null,[(0,l._)("th",{scope:"col"}," # "),(0,l._)("th",{scope:"col"}," 商品名稱 "),(0,l._)("th",{scope:"col"}," 商品價格 "),(0,l._)("th",{scope:"col"}," 數量 "),(0,l._)("th",{scope:"col",width:"300"}," 總價 ")])],-1),i={key:0},p=(0,l._)("td",{colspan:"4",class:"text-center"},"沒有任何訂單",-1),w=[p],_={scope:"row"};function h(e,t,r,s,a,n){return(0,l.wg)(),(0,l.iD)("table",d,[u,(0,l._)("tbody",null,[!s.orders.length|0===s.orders.length?((0,l.wg)(),(0,l.iD)("tr",i,w)):((0,l.wg)(!0),(0,l.iD)(l.HY,{key:1},(0,l.Ko)(s.orders,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("th",_,(0,c.zw)(e.id),1),(0,l._)("td",null,(0,c.zw)(e.Product.name),1),(0,l._)("td",null,(0,c.zw)(e.price),1),(0,l._)("td",null,(0,c.zw)(e.quantity),1),(0,l._)("td",null,(0,c.zw)(e.Order.totalPrice),1)])))),128))])])}var g=r(2262),y=r(9682),D=r(2863),k=r(2201),b={setup(){const e=(0,g.iH)([]),t=(0,k.yj)(),r=async()=>{const r=t.params.userId;try{const{data:t}=await y.Z.getUserOrders({userId:r});e.value=t}catch(l){D.F.fire({icon:"error",title:"暫時無法獲得商家商品資訊，請稍後再試"})}};return(0,l.bv)(r),{orders:e}}},v=r(3744);const f=(0,v.Z)(b,[["render",h]]);var z=f;const O=e=>((0,l.dD)("data-v-3f2a12aa"),e=e(),(0,l.Cn)(),e),m={class:"table table-bordered"},P=O((()=>(0,l._)("thead",{class:"thead-dark"},[(0,l._)("tr",null,[(0,l._)("th",{scope:"col"}," # "),(0,l._)("th",{scope:"col"}," 商品名稱 "),(0,l._)("th",{scope:"col"}," 商品價格 "),(0,l._)("th",{scope:"col"}," 數量 "),(0,l._)("th",{scope:"col",width:"300"}," 總價 ")])],-1))),Z={key:0},q=O((()=>(0,l._)("td",{colspan:"4",class:"text-center"},"沒有任何訂單",-1))),H=[q],U=["rowspan"],I=["rowspan"],j=O((()=>(0,l._)("td",{colspan:"4",class:"text-left"},"所有訂單總和：",-1)));function C(e,t,r,s,a,n){return(0,l.wg)(),(0,l.iD)("table",m,[P,(0,l._)("tbody",null,[s.orders.length&&0!==s.orders.length?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("tr",Z,H)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.orders,(e=>((0,l.wg)(),(0,l.iD)(l.HY,null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.OrderDetails,((t,r)=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id,class:(0,c.C_)({"border-bottom":r===e.OrderDetails.length-1})},[0===r?((0,l.wg)(),(0,l.iD)("th",{key:0,rowspan:e.OrderDetails.length,scope:"row"},(0,c.zw)(e.id),9,U)):(0,l.kq)("",!0),(0,l._)("td",null,(0,c.zw)(t.Product.name),1),(0,l._)("td",null,(0,c.zw)(t.price),1),(0,l._)("td",null,(0,c.zw)(t.quantity),1),r===e.OrderDetails.length-1?((0,l.wg)(),(0,l.iD)("td",{key:1,class:"no-top-border",rowspan:e.OrderDetails[r].length},(0,c.zw)(e.totalPrice),9,I)):(0,l.kq)("",!0)],2)))),128))],64)))),256))]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[j,(0,l._)("td",null,(0,c.zw)(s.totalOrderPrice),1)])])])}var Y={setup(){const e=(0,g.iH)([]),t=(0,k.yj)(),r=async()=>{const r=t.params.userId;try{const{data:t}=await y.Z.getUserOrders({userId:r});e.value=t}catch(l){D.F.fire({icon:"error",title:"暫時無法獲得商家商品資訊，請稍後再試"})}},s=(0,l.Fl)((()=>Array.isArray(e.value)?e.value.reduce(((e,t)=>e+t.totalPrice),0):0));return(0,l.bv)(r),{orders:e,totalOrderPrice:s}}};const x=(0,v.Z)(Y,[["render",C],["__scopeId","data-v-3f2a12aa"]]);var F=x,K=r(4331),A=(0,l.aZ)({components:{NavTabs:o.Z,SellerDetail:z,BuyDetail:F},setup(){const e=(0,K.L)();return{currentUser:e.currentUser}}});const B=(0,v.Z)(A,[["render",n]]);var S=B}}]);
//# sourceMappingURL=677.8525f412.js.map