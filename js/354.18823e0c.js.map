{"version":3,"file":"js/354.18823e0c.js","mappings":"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","sources":["webpack://shopping-front-end/./src/components/ProductForm.vue","webpack://shopping-front-end/./src/apis/category.js","webpack://shopping-front-end/./src/components/ProductForm.vue?4e43","webpack://shopping-front-end/./src/views/ProductEdit.vue","webpack://shopping-front-end/./src/views/ProductEdit.vue?406f"],"sourcesContent":["<template>\r\n  <form @submit.stop.prevent=\"handleSubmit\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name</label>\r\n      <input\r\n        id=\"name\"\r\n        v-model=\"product.name\"\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        name=\"name\"\r\n        placeholder=\"Enter name\"\r\n        required\r\n      >\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"categoryId\">Category</label>\r\n      <select\r\n        id=\"categoryId\"\r\n        class=\"form-control\"\r\n        name=\"categoryId\"\r\n        v-model=\"product.categoryId\"\r\n        required\r\n      >\r\n        <option\r\n          value=\"\"\r\n          selected\r\n          disabled\r\n        >\r\n          --請選擇--\r\n        </option>\r\n        <option \r\n          v-for=\"category in categories\"\r\n          :key=\"category.id\"\r\n          :value=\"category.id\">\r\n          {{ category.name }}\r\n        </option>\r\n      </select>\r\n    </div>\r\n    \r\n    <div class=\"form-group\">\r\n      <label for=\"price\">Price</label>\r\n      <input\r\n        id=\"price\"\r\n        v-model=\"product.price\"\r\n        type=\"number\"\r\n        class=\"form-control\"\r\n        placeholder=\"Enter price\"\r\n        name=\"price\"\r\n      >\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"stock\">Stock</label>\r\n      <input\r\n        id=\"stock\"\r\n        v-model=\"product.stock\"\r\n        type=\"number\"\r\n        class=\"form-control\"\r\n        placeholder=\"Enter stock\"\r\n        name=\"stock\"\r\n      >\r\n    </div>\r\n\r\n    <div class=\"form-label-group mb-3\">\r\n        <label for=\"role\">Status</label>\r\n        <select id=\"status\" name=\"status\" class=\"form-control\" v-model=\"product.status\" required>\r\n          <option value=\"active\">Active</option>\r\n          <option value=\"inactive\">Inactive</option>\r\n        </select>\r\n      </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea\r\n        id=\"description\"\r\n        class=\"form-control\"\r\n        rows=\"3\"\r\n        name=\"description\"\r\n        v-model=\"product.description\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"image\">Image</label>\r\n      <img\r\n        v-if=\"product.image\"\r\n        :src=\"product.image\"\r\n        class=\"d-block img-thumbnail mb-3\"\r\n        width=\"200\"\r\n        height=\"200\"\r\n      >\r\n\r\n      <input\r\n        id=\"image\"\r\n        type=\"file\"\r\n        name=\"image\"\r\n        accept=\"image/*\"\r\n        class=\"form-control-file\"\r\n        @change=\"handleFileChange\"\r\n      >\r\n    </div>\r\n\r\n    <button\r\n      type=\"submit\"\r\n      class=\"btn btn-primary\"\r\n    >\r\n      送出\r\n    </button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, watch } from 'vue'\r\nimport categoryAPI from './../apis/category'\r\nimport { Toast } from '@/utils/helper'\r\n\r\nexport default {\r\n  props: {\r\n    initialProduct: {\r\n      type: Object,\r\n      default: () => ({\r\n        name: '',\r\n        categoryId: '',\r\n        description: '',\r\n        image: '',\r\n        price: 0,\r\n        stock: 0,\r\n        status: '',\r\n      })\r\n    }\r\n  },\r\n  setup( props, { emit }) {\r\n    // const product = ref({\r\n    //   name: '',\r\n    //   categoryId: '',\r\n    //   tel: '',\r\n    //   address: '',\r\n    //   description: '',\r\n    //   image: '',\r\n    //   price: 0,\r\n    //   stock: 0,\r\n    //   status: '',\r\n    // })\r\n\r\n    const product = ref({ ...props.initialProduct })\r\n    \r\n    const categories = ref([])\r\n\r\n    const fetchCategories = async () => {\r\n      try {\r\n        const { data } = await categoryAPI.getCategories()\r\n\r\n        categories.value = data\r\n      } catch (error) {\r\n          Toast.fire({\r\n            icon:'error',\r\n            title: '無法獲得分類標籤，請稍後再試'\r\n          })\r\n        }\r\n    }\r\n    \r\n    const handleFileChange =  (e) => {\r\n      const files = e.target.files\r\n      \r\n      if (files.length === 0) {\r\n        product.value.image = ''\r\n      } else {\r\n        const imageURL = window.URL.createObjectURL(files[0])\r\n\r\n        product.value.image = imageURL\r\n      }\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n      const form = e.target\r\n      const formData = new FormData(form)\r\n\r\n      emit('after-submit', formData)\r\n    }\r\n\r\n    watch(() => props.initialProduct, (newVal) => {\r\n      product.value = { ...newVal }\r\n    }, { deep: true })\r\n    \r\n\r\n    onMounted(() => {\r\n      fetchCategories()\r\n    })\r\n\r\n\r\n    return {\r\n      product,\r\n      categories,\r\n      handleFileChange,\r\n      handleSubmit\r\n    }\r\n  }\r\n}\r\n</script>","import { apiHelper } from \"./../utils/helper\";\r\n\r\nexport default {\r\n  getCategories () {\r\n    return apiHelper.get('/categories')\r\n  }\r\n}","import { render } from \"./ProductForm.vue?vue&type=template&id=238e4019\"\nimport script from \"./ProductForm.vue?vue&type=script&lang=js\"\nexport * from \"./ProductForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"container py-5\">\r\n    <ProductForm @after-submit=\"handleAfterSubmit\" :initial-product=\"product\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport ProductForm from './../components/ProductForm.vue'\r\nimport productAPI from '@/apis/product'\r\nimport { Toast } from '@/utils/helper'\r\n\r\nexport default {\r\n  components: {\r\n    ProductForm\r\n  },\r\n  setup() {\r\n    const product = ref({\r\n      id: -1,\r\n      name: '',\r\n      categoryId: '',\r\n      description: '',\r\n      image: '',\r\n      price: 0,\r\n      stock: 0,\r\n      status: '',\r\n    })\r\n    \r\n    const router = useRouter()\r\n\r\n    const fetchProduct = async (productId) => {\r\n      try {\r\n        const { data } = await productAPI.getProduct({ productId })\r\n\r\n        product.value = {\r\n          ...product.value,\r\n          ...data\r\n        }\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon:'error',\r\n          title: '無法取得商品資訊，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n\r\n    const handleAfterSubmit = async (formData) => {\r\n      \r\n      try {\r\n        console.log('formData', {formData})\r\n\r\n        for (let [name, value] of formData.entries()) {\r\n        console.log(name + ': ' + value)\r\n      }\r\n        const { data } = await productAPI.updateProduct({ productId: product.value.id, formData})\r\n        console.log('data', data)\r\n\r\n        router.push({ name: 'products' })\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon:'error',\r\n          title: '無法更新商品  資料，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n\r\n    onMounted(() => {\r\n      const { id } = router.currentRoute.value.params\r\n      fetchProduct(id)\r\n    })\r\n\r\n\r\n\r\n    return {\r\n      handleAfterSubmit,\r\n      product\r\n    }\r\n  }\r\n}\r\n</script>","import { render } from \"./ProductEdit.vue?vue&type=template&id=5e84f38c\"\nimport script from \"./ProductEdit.vue?vue&type=script&lang=js\"\nexport * from \"./ProductEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","value","selected","disabled","_hoisted_13","_hoisted_14","type","_createElementBlock","onSubmit","_cache","_withModifiers","args","$setup","handleSubmit","_hoisted_1","_hoisted_2","id","product","name","$event","placeholder","required","_hoisted_3","_hoisted_4","categoryId","_hoisted_5","_Fragment","_renderList","categories","category","key","_hoisted_6","_hoisted_7","_hoisted_8","price","_hoisted_9","_hoisted_10","stock","_hoisted_11","_hoisted_12","status","_hoisted_16","_hoisted_17","rows","description","_hoisted_18","_hoisted_19","image","src","width","height","accept","onChange","handleFileChange","_hoisted_21","getCategories","apiHelper","get","props","initialProduct","Object","default","setup","emit","ref","fetchCategories","async","data","categoryAPI","error","Toast","fire","icon","title","e","files","target","length","imageURL","window","URL","createObjectURL","form","formData","FormData","watch","newVal","deep","onMounted","__exports__","render","_createVNode","_component_ProductForm","onAfterSubmit","handleAfterSubmit","components","ProductForm","router","useRouter","fetchProduct","productAPI","getProduct","productId","console","log","entries","updateProduct","push","Error","message","currentRoute","params"],"sourceRoot":""}